/*! For license information please see main.6cc99780.chunk.js.LICENSE.txt */
(this["webpackJsonptest-app"]=this["webpackJsonptest-app"]||[]).push([[0],{112:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(40),r=n.n(o),c=(n(112),n(84)),i=n(97),l=n(38),d=(n(87),n(29)),h=n(10),j=n.p+"static/media/mountaincity2.bd0ea919.jpg",u=n(0);var m=function(){var e={color:"white"},t={width:"100%",height:"960px",backgroundImage:"url(".concat(j,")"),backgroundPosition:"center",backgroundSize:"cover"};return document.title="PartyNow!\ud83c\udf89",Object(u.jsx)("section",{className:"test",style:t,children:Object(u.jsxs)("div",{children:[Object(u.jsx)("nav",{children:Object(u.jsxs)("ul",{className:"nav-links",children:[console.log("HERE TOKEN",localStorage.getItem("myToken")),localStorage.getItem("myToken")?null:Object(u.jsx)(d.b,{style:e,to:"/Registration",children:Object(u.jsx)("li",{children:"Registration"})}),localStorage.getItem("myToken")?null:Object(u.jsx)(d.b,{style:e,to:"/Login",children:Object(u.jsx)("li",{children:"Login"})}),localStorage.getItem("myToken")?Object(u.jsx)(d.b,{style:e,to:"/Logout",children:Object(u.jsx)("li",{children:"Logout"})}):null,localStorage.getItem("myToken")?Object(u.jsx)(d.b,{style:e,to:"/PartiesOfUser",children:Object(u.jsx)("li",{children:"Your Parties"})}):null]})}),Object(u.jsx)("div",{className:"wrapper",children:localStorage.getItem("myToken")?Object(u.jsx)(d.b,{to:"/PartyCreationForm",children:Object(u.jsx)("button",{class:"PartyCreationbutton",children:"create a Party!"})}):null})]})})},b=n(9),p=n.n(b),g=n(14),O=n(18),x=n(19),f=n(22),v=n(21),y=n(98),k=n.p+"static/media/Create.abffce73.jpg",E={name:"",theme:"",date_time:"",dress_code:"",comments:"",nameError:"",nameError2:"",timeError:"",emailError:"",passwordError:"",redirect:!1},S=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state=E,e.handleChange=function(t){e.setState({name:t.target.value})},e.handleChangeTheme=function(t){e.setState({theme:t.target.value})},e.handleChangeDateTime=function(t){e.setState({date_time:t.target.value})},e.handleChangeDressCode=function(t){e.setState({dress_code:t.target.value})},e.handleChangeComments=function(t){e.setState({comments:t.target.value})},e.validate=function(){var t=localStorage.getItem("myToken");console.log(typeof t);var n="",a="";if(e.state.name||(n="name cannot be blank"),e.state.date_time||(a="time should be chosen"),e.state.name.length>80&&(n="Name of the party cannot be that long"),console.log("VALIDATE",e.props.parties),console.log("The length",e.props.parties.length),e.props.parties.length)for(var s=0;s<e.props.parties.length;s++)e.state.name===e.props.parties[s].title&&(console.log("DUPLICATE name"),n="This name of the party is already in use.Pick another one");return!n&&!a||(e.setState({nameError:n}),e.setState({timeError:a}),e.setState({nameError2:""}),!1)},e.handleSubmit=function(t){t.preventDefault(),e.validate()&&e.setState(E)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t={width:"100%",height:"965px",backgroundImage:"url(".concat(k,")"),backgroundPosition:"center",backgroundSize:"cover",textAlign:"center"};return Object(u.jsx)("div",{children:localStorage.getItem("myToken")?Object(u.jsx)("div",{children:Object(u.jsx)("section",{style:t,children:Object(u.jsx)("div",{class:"ui form",style:{overflowY:"scroll",textAlign:"center",padding:"150px",whitespace:"nowrap"},children:Object(u.jsxs)(y.a,{children:[Object(u.jsxs)("div",{class:"fields",children:[Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" Party Title",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{placeholder:"Party Title",value:this.state.name,onChange:this.handleChange}),Object(u.jsx)("i",{class:"glass martini icon"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError}),Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError2})]})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" The theme of the party",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{placeholder:"Theme of the party",value1:this.state.theme,onChange:this.handleChangeTheme}),Object(u.jsx)("i",{class:"bookmark icon"})]})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" Enter a date and time for your party booking:",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{id:"party",type:"datetime-local",name:"partydate",value2:this.state.date_time,onChange:this.handleChangeDateTime}),Object(u.jsx)("i",{class:"calendar alternate icon"})]}),Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.timeError})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" Dress code",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{placeholder:"dress-code for yoyr party",value3:this.state.dress_code,onChange:this.handleChangeDressCode}),Object(u.jsx)("i",{class:"pied piper hat icon"})]})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:["Party rules",Object(u.jsx)("textarea",{name:"rules",cols:"10",placeholder:"\u043a\u043e\u0434\u0435\u0441 \u0442\u0443\u0441\u043e\u0432\u043a\u0438!!",value4:this.state.comments,onChange:this.handleChangeComments})]})})]}),Object(u.jsx)("button",{class:"ui black submit button",onClick:function(){if(e.validate()){e.setState(E),console.log("ture"),e.state.name=e.state.name.trim();var t=e.state.name,n=e.state.theme,a=e.state.date_time,s=e.state.dress_code,o=e.state.comments;console.log(t),console.log(n),console.log(a),console.log(s),console.log(o),Object(g.a)(p.a.mark((function r(){var c,i,l;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=localStorage.getItem("myToken"),i={title:t,theme:n,date_time:a,dress_code:s,comments:o},r.next=4,fetch("/api/add_new_party",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":c.replace(/['"]+/g,"")},body:JSON.stringify(i)});case 4:l=r.sent,console.log("HERE1"),l.ok?(console.log("response worked!"),e.props.onNewParty(i),e.props.history.push("/")):403==l.status?(console.log("ERRORR"),"Restricted for this User ",e.setState({nameError2:"Restricted for this User "})):423==l.status&&(localStorage.clear(),e.props.history.push("/Login"));case 7:case"end":return r.stop()}}),r)})))()}},children:"Create Party!"})]})})})}):Object(u.jsx)(w,{})})}}]),n}(s.a.Component),w=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"Forbidden. You should login first!"})})},C=Object(h.f)(S),R=n.p+"static/media/RegisterBuilding2.ad454e25.jpg",T={nameError:"",nameError2:"",nameErrorPass:"",nameErrorEmail:"",nameErrorEmail2:""},P=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state=T,e.handleChange=function(t){e.setState({name:t.target.value})},e.handleChangePass=function(t){e.setState({password:t.target.value})},e.handleChangeEmail=function(t){e.setState({email:t.target.value})},e.validate=function(){var t="",n="",a="";return e.state.name||(t="Username can not be blank"),e.state.name&&e.state.name.length>80&&(t="Username can not be that long"),e.state.password||(n="Password cannot be blank"),e.state.password&&e.state.password.length>80&&(n="User's password can not be that long"),e.state.email||(a="User's email can not be blank"),!e.state.email||e.state.email.includes("@")&&e.state.email.includes(".")||(a="This is not an email"),e.state.email&&e.state.email.length>80&&(a="User's email can not be that long"),!(t||n||a)||(e.setState({nameError:t}),e.setState({nameError2:""}),e.setState({nameErrorPass:n}),e.setState({nameErrorEmail:a}),e.setState({nameErrorEmail2:""}),!1)},e.handleSubmit=function(t){t.preventDefault(),e.validate()&&e.setState(T)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t={width:"100%",height:"965px",backgroundImage:"url(".concat(R,")"),backgroundPosition:"center",backgroundSize:"cover",textAlign:"center"};return Object(u.jsx)("section",{style:t,children:Object(u.jsx)("div",{class:"ui form",style:{textAlign:"center",padding:"350px 300px"},children:Object(u.jsxs)(y.a,{children:[Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:["Username",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{placeholder:"Username",value:this.state.name,onChange:this.handleChange}),Object(u.jsx)("i",{class:"user icon"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError}),Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError2})]})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:["Password",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChangePass}),Object(u.jsx)("i",{class:"lock icon"})]}),Object(u.jsx)("div",{children:Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameErrorPass})})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" User Email",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{placeholder:"Email",value:this.state.email,onChange:this.handleChangeEmail}),Object(u.jsx)("i",{class:"envelope icon"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameErrorEmail}),Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameErrorEmail2})]})]})}),Object(u.jsx)("button",{class:"ui blue submit button",onClick:function(){if(e.validate()){e.setState(T),e.state.name=e.state.name.trim();var t=e.state.name,n=e.state.password,a=e.state.email;console.log(t),Object(g.a)(p.a.mark((function s(){var o,r;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o={name:t,password:n,email:a},s.next=3,fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 3:r=s.sent,console.log("HERE1"),r.ok?(console.log("response worked!"),e.props.history.push("/")):401==r.status?(console.log("ERRORR"),"Duplicate name,choose another one",e.setState({nameError2:"Duplicate name,choose another one"})):403==r.status&&("Email already in use",e.setState({nameErrorEmail2:"Email already in use"}));case 6:case"end":return s.stop()}}),s)})))()}},children:"Register"})]})})})}}]),n}(s.a.Component),_=n.p+"static/media/LoginBuildings.7aeb152d.jpg",I={nameError:"",nameError2:""},U=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state=I,e.handleChange=function(t){e.setState({name:t.target.value})},e.handleChangePass=function(t){e.setState({password:t.target.value})},e.validate=function(){var t="";return e.state.name||(t="Username can not be blank"),e.state.name&&e.state.name.length>80&&(t="Username cannot be that long"),!t||(e.setState({nameError:t}),e.setState({nameError2:""}),!1)},e.handleSubmit=function(t){t.preventDefault(),e.validate()&&e.setState(I)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this,t={width:"100%",height:"965px",backgroundImage:"url(".concat(_,")"),backgroundPosition:"center",backgroundSize:"cover",textAlign:"center"};return Object(u.jsx)("section",{style:t,children:Object(u.jsx)("div",{className:"ui form",style:{textAlign:"center",padding:"350px 300px"},children:Object(u.jsxs)(y.a,{children:[Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:["Username",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{placeholder:"Username",value:this.state.name,onChange:this.handleChange}),Object(u.jsx)("i",{class:"user icon"})]}),Object(u.jsxs)("div",{class:"horizontal",children:[Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError}),Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError2})]})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" Password",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChangePass}),Object(u.jsx)("i",{class:"lock icon"})]})]})}),Object(u.jsx)("button",{class:"ui blue submit button",onClick:function(){if(e.validate()){e.setState(I),e.state.name=e.state.name.trim();var t=e.state.name,n=e.state.password;console.log(t),Object(g.a)(p.a.mark((function a(){var s,o,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={name:t,password:n},a.next=3,fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:if(o=a.sent,console.log("HERE1"),!o.ok){a.next=15;break}return console.log("response worked!"),a.next=9,o.json();case 9:r=a.sent,console.log(r.token),localStorage.setItem("myToken",r.token),e.props.history.push("/"),a.next=16;break;case 15:401==o.status?(console.log("ERRORR"),"Incorrect password or login",e.setState({nameError2:"Incorrect password or login"})):403==o.status?(console.log("ERRORR"),"Incorrect password or login",e.setState({nameError2:"Incorrect password or login"})):406==o.status?(console.log("ERRORR"),"No email confirmation",e.setState({nameError2:"No email confirmation"})):410==o.status&&(console.log("ERRORR"),"The user is blocked",e.setState({nameError2:"The user is blocked"}));case 16:case"end":return a.stop()}}),a)})))()}},children:"Login"})]})})})}}]),n}(s.a.Component),N=n(136),D=n(137),L=n(135),A={name:"",theme:"",date_time:"",dress_code:"",comments:"",nameError:"",timeError:"",emailError:"",passwordError:"",redirect:!1},z=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state=A,e.handleChangeTheme=function(t){e.setState({theme:t.target.value})},e.handleChangeDateTime=function(t){e.setState({date_time:t.target.value})},e.handleChangeDressCode=function(t){e.setState({dress_code:t.target.value})},e.handleChangeComments=function(t){e.setState({comments:t.target.value})},e.validate=function(){var t=localStorage.getItem("myToken");console.log(typeof t);var n="";return e.state.date_time||(n="time should be chosen"),!n||(e.setState({timeError:n}),!1)},e.handleSubmit=function(t){t.preventDefault(),e.validate()&&e.setState(A)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsx)(y.a,{children:Object(u.jsxs)("div",{class:"ui form",children:[Object(u.jsxs)("div",{class:"fields",children:[Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" New theme of the party",Object(u.jsx)("input",{placeholder:"New theme",value1:this.state.theme,onChange:this.handleChangeTheme})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" New date time of the party",Object(u.jsx)("input",{id:"party",type:"datetime-local",name:"partydate",value2:this.state.date_time,onChange:this.handleChangeDateTime}),Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.timeError})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" New dress code",Object(u.jsx)("input",{placeholder:"dress-code",value3:this.state.dress_code,onChange:this.handleChangeDressCode})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsx)("textarea",{placeholder:"new party rules",value4:this.state.comments,onChange:this.handleChangeComments})})]}),Object(u.jsx)("button",{class:"ui black submit button",onClick:function(){if(e.validate()){console.log("ture");var t=e.state.theme,n=e.state.date_time,a=e.state.dress_code,s=e.state.comments;console.log(t),console.log(n),console.log(a),console.log(s),Object(g.a)(p.a.mark((function o(){var r,c,i;return p.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=localStorage.getItem("myToken"),c={theme:t,date_time:n,dress_code:a,comments:s},o.next=4,fetch("/api/ch_party/"+e.props.id,{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":r.replace(/['"]+/g,"")},body:JSON.stringify(c)});case 4:i=o.sent,console.log("HERE1"),i.ok?(console.log("response worked!"),window.location.reload()):423===i.status&&(localStorage.clear(),e.props.history.push("/Login"),console.log("ERRORR"));case 7:case"end":return o.stop()}}),o)})))()}},children:"Update"})]})})}}]),n}(s.a.Component),H=Object(h.f)(z),F=0,B=0,J=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"No parties created.Go create some!"})})},Y=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"You are not logged in!"})})},G=function(e){var t=Object(a.useState)(0),n=Object(l.a)(t,2),s=n[0],o=n[1],r=Object(a.useState)([]),c=Object(l.a)(r,2),i=c[0],d=c[1];return Object(a.useEffect)((function(){var t=localStorage.getItem("myToken");t?fetch("/api/party_by_user",{method:"GET",headers:{"Content-Type":"application/json","x-access-token":t.replace(/['"]+/g,"")}}).then((function(t){423===t.status?e.history.push("/Login"):t.json().then((function(e){d(e.party_list)}))})):(console.log("My token is ",t),B=1)}),[]),Object(u.jsx)("div",{children:1===B?Object(u.jsx)(Y,{}):i.length?Object(u.jsx)(L.a,{style:{marginTop:-250},children:Object(u.jsx)(N.a,{children:i.map((function(t){return Object(u.jsx)("div",{class:"ui massive form",children:Object(u.jsxs)(N.a.Item,{style:{margin:250},children:[Object(u.jsxs)(N.a,{style:{backgroundColor:"#80A2CB",textAlign:"left",width:"200%"},children:[Object(u.jsx)(D.a,{children:t.title}),Object(u.jsx)(N.a.Item,{children:Object(u.jsx)(N.a.Content,{children:Object(u.jsxs)(N.a.Header,{children:["Theme: ",t.theme]})})}),Object(u.jsx)(N.a.Item,{children:Object(u.jsx)(N.a.Content,{children:Object(u.jsxs)(N.a.Header,{children:["Date time: ",t.date_time.replace("T","   ")]})})}),Object(u.jsx)(N.a.Item,{children:Object(u.jsx)(N.a.Content,{children:Object(u.jsxs)(N.a.Header,{children:["Dress code: ",t.dress_code]})})}),Object(u.jsx)(N.a.Item,{children:Object(u.jsx)(N.a.Content,{children:Object(u.jsxs)(N.a.Header,{children:["Comments: ",t.comments]})})}),Object(u.jsx)("button",{onClick:function(){Object(g.a)(p.a.mark((function n(){var a,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=localStorage.getItem("myToken"),n.next=3,fetch("/api/del_party/"+t.id,{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":a.replace(/['"]+/g,"")}});case 3:s=n.sent,console.log("HERE1"),s.ok?(console.log("response worked -DELETED!"),window.location.reload()):423===s.status&&(localStorage.clear(),e.history.push("/Login"),console.log("ERRORR"));case 6:case"end":return n.stop()}}),n)})))()},children:"Delete"}),Object(u.jsx)("button",{onClick:function(){0==s?o(s+1):1==s&&o(s-1),F=t.id},children:"Change"}),Object(u.jsxs)("div",{children:[console.log("NameLeft",F),console.log("NameRight",t.title),1===s&&F===t.id?Object(u.jsxs)("div",{children:[" ",Object(u.jsx)(H,{id:F})," "]}):null]})]}),Object(u.jsx)("div",{class:"ui divider"})]},t.title)})}))})}):Object(u.jsx)(J,{})})},M={nameError:"",nameError2:""},K=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state=M,e.handleChange=function(t){e.setState({name:t.target.value})},e.handleChangePass=function(t){e.setState({password:t.target.value})},e.validate=function(){var t="";return e.state.name||(t="name cannot be blank"),e.state.name&&e.state.name.length>80&&(t="Your name cannot be that long"),!t||(e.setState({nameError:t}),e.setState({nameError2:""}),!1)},e.handleSubmit=function(t){t.preventDefault(),e.validate()&&e.setState(M)},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsx)("section",{children:Object(u.jsx)("div",{class:"ui form",style:{textAlign:"center",padding:"350px 300px"},children:Object(u.jsxs)(y.a,{children:[Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" Admin's name",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{size:"26",placeholder:"Name",value:this.state.name,onChange:this.handleChange}),Object(u.jsx)("i",{class:"user icon"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError}),Object(u.jsx)("div",{style:{fontSize:12,color:"red"},children:this.state.nameError2})]})]})}),Object(u.jsx)("div",{class:"field",children:Object(u.jsxs)(y.a,{children:[" Password",Object(u.jsxs)("div",{class:"ui left icon input",children:[Object(u.jsx)("input",{size:"30",type:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChangePass}),Object(u.jsx)("i",{class:"lock icon"})]})]})}),Object(u.jsx)("button",{class:"ui blue submit button",onClick:function(){if(e.validate()){e.setState(M),e.state.name=e.state.name.trim();var t=e.state.name,n=e.state.password;console.log(t),Object(g.a)(p.a.mark((function a(){var s,o,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={name:t,password:n},a.next=3,fetch("/api/login_adm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:if(o=a.sent,console.log("HERE1"),!o.ok){a.next=16;break}return console.log("response worked!"),a.next=9,o.json();case 9:r=a.sent,console.log(r.token),localStorage.setItem("myToken",r.token),e.props.history.push("/admin/Adminpanel"),window.location.reload(),a.next=17;break;case 16:401===o.status?(console.log("ERRORR"),"Incorrect password or login",e.setState({nameError2:"Incorrect password or login"})):403===o.status?(console.log("ERRORR"),"You are not an admin",e.setState({nameError2:"You are not an admin"})):404===o.status&&(console.log("ERRORR"),"No such user",e.setState({nameError2:"No such user"}));case 17:case"end":return a.stop()}}),a)})))()}},children:"Login!"})]})})})}}]),n}(s.a.Component),V=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[localStorage.clear(),this.props.history.push("/")]})}}]),n}(s.a.Component),q=0,Q=0,W=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"Forbidden. Not allowed."})})},X=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"Forbidden. Not logged in."})})},Z=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),s=n[0],o=n[1];Object(a.useEffect)((function(){var e=localStorage.getItem("myToken");e?fetch("/api/user",{method:"GET",headers:{"Content-Type":"application/json","x-access-token":e.replace(/['"]+/g,"")}}).then((function(e){403===e.status?(q=1,console.log("HErer")):(console.log("HErer2"),e.json().then((function(e){o(e.users)})))})):(console.log("My token is ",e),Q=1)}),[]);var r=Object(a.useState)(window.location.href),c=Object(l.a)(r,2),i=c[0];c[1];return Object(a.useEffect)((function(){return function(){localStorage.clear()}}),i),Object(u.jsx)("div",{children:1===q?Object(u.jsx)(W,{}):1===Q?Object(u.jsx)(X,{}):Object(u.jsx)(L.a,{style:{marginTop:-250},children:Object(u.jsx)(N.a,{children:s.filter((function(e){return"Admin"!=e.name})).map((function(t){return Object(u.jsx)("div",{class:"ui massive form",children:Object(u.jsxs)(N.a.Item,{style:{margin:250},children:[Object(u.jsxs)(N.a,{style:{textAlign:"left"},children:[Object(u.jsx)(D.a,{children:t.name}),Object(u.jsx)(N.a.Item,{children:Object(u.jsx)(N.a.Content,{children:Object(u.jsxs)(N.a.Header,{children:["Email: ",t.email]})})}),Object(u.jsx)(N.a.Item,{children:Object(u.jsx)(N.a.Content,{children:Object(u.jsxs)(N.a.Header,{children:["Public_id: ",t.public_id]})})}),Object(u.jsx)("button",{class:"ui black submit button",onClick:function(){Object(g.a)(p.a.mark((function n(){var a,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=localStorage.getItem("myToken"),n.next=3,fetch("/api/user/"+t.public_id,{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":a.replace(/['"]+/g,"")}});case 3:s=n.sent,console.log("HERE1"),s.ok?(console.log("response worked -Blocked!"),console.log(t.block_user,t.public_id),window.location.reload()):423===s.status&&(localStorage.clear(),e.history.push("/admin"),console.log("ERRORR"));case 6:case"end":return n.stop()}}),n)})))()},children:t.block_user?"Unblock User":"BlockUser"}),Object(u.jsx)("button",{class:"ui black submit button",onClick:function(){Object(g.a)(p.a.mark((function n(){var a,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=localStorage.getItem("myToken"),n.next=3,fetch("/api/restr_user/"+t.public_id,{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":a.replace(/['"]+/g,"")}});case 3:s=n.sent,console.log("HERE1"),s.ok?(console.log("response worked -Restricted!"),console.log(t.restricted,t.public_id),window.location.reload()):423===s.status&&(localStorage.clear(),e.history.push("/admin"),console.log("ERRORR"));case 6:case"end":return n.stop()}}),n)})))()},children:t.restricted?"Unrestrict User":"Restrict User"}),Object(u.jsx)("button",{class:"ui black submit button",onClick:function(){Object(g.a)(p.a.mark((function n(){var a,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=localStorage.getItem("myToken"),n.next=3,fetch("/api/reset_password/"+t.public_id,{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":a.replace(/['"]+/g,"")}});case 3:s=n.sent,console.log("HERE1"),s.ok?(console.log("response worked -ChangedPass!"),window.location.reload()):423===s.status&&(localStorage.clear(),e.history.push("/admin"),console.log("ERRORR"));case 6:case"end":return n.stop()}}),n)})))()},children:"Change Pass"}),Object(u.jsx)("button",{class:"ui black submit button",onClick:function(){Object(g.a)(p.a.mark((function n(){var a,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=localStorage.getItem("myToken"),n.next=3,fetch("/api/user/"+t.public_id,{method:"DELETE",headers:{"Content-Type":"application/json","x-access-token":a.replace(/['"]+/g,"")}});case 3:s=n.sent,console.log("HERE1"),s.ok?(console.log("response worked -Deleted User!"),window.location.reload()):423===s.status&&(localStorage.clear(),e.history.push("/admin"),console.log("ERRORR"));case 6:case"end":return n.stop()}}),n)})))()},children:"Delete User"})]}),Object(u.jsx)("div",{class:"ui divider"})]},t.name)})}))})})})};var $=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){fetch("/api/parties").then((function(e){return e.json().then((function(e){s(e.parties)}))}))}),[]),Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(d.a,{children:Object(u.jsxs)(h.c,{children:[Object(u.jsx)(h.a,{path:"/",exact:!0,component:m}),Object(u.jsx)(h.a,{path:"/PartyCreationForm",component:function(e){return console.log("HELLLOO3",typeof n),Object(u.jsx)(C,Object(c.a)(Object(c.a)({},e),{},{onNewParty:function(e){return s((function(t){return[].concat(Object(i.a)(t),[e])}))},parties:n}))}}),Object(u.jsx)(h.a,{path:"/Registration",component:P}),Object(u.jsx)(h.a,{path:"/Login",component:U}),Object(u.jsx)(h.a,{path:"/PartiesOfUser",component:G}),Object(u.jsx)(h.a,{path:"/Logout",component:V}),Object(u.jsx)(h.a,{path:"/admin",exact:!0,component:K}),Object(u.jsx)(h.a,{path:"/admin/Adminpanel",component:Z})]})})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,138)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),o(e),r(e)}))};n(121);r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)($,{})}),document.getElementById("root")),ee()},87:function(e,t,n){}},[[122,1,2]]]);
//# sourceMappingURL=main.6cc99780.chunk.js.map